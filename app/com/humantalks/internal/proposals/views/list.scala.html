@import com.humantalks.exposed.proposals.Proposal
@import com.humantalks.internal.persons.Person
@import global.views.html.format._
@import global.views.html.partials._
@import com.humantalks.internal.views.html.partials._
@import com.humantalks.internal.proposals.routes.ProposalCtrl
@import com.humantalks.internal.persons.routes.PersonCtrl
@(proposalList: List[Proposal], personList: List[Person])(implicit request: RequestHeader, messagesApi: MessagesApi, user: Option[Person])
@main("Proposals") {
    @header("proposal")

    <div class="container">
        @flash()
        <h1>Listes des propositions (@proposalList.length)</h1>
        @proposalList.map { proposal =>
            <div class="media card">
                <div class="media-body">
                    <h4 class="media-heading">
                        @partials.status(proposal)
                        <a href="@ProposalCtrl.get(proposal.id)">@proposal.data.title</a>
                        @proposal.data.slides.map{s => <a href="@s" target="_blank" title="slides"><span class="fa fa-slideshare"></span></a>}
                    </h4>
                    @proposal.data.description.map{d => <p>@multiline(d)</p>}
                    <p>
                        @if(proposal.data.speakers.nonEmpty) {
                            par @proposal.data.speakers.flatMap(id => personList.find(_.id == id)).map { s => <a href="@PersonCtrl.get(s.id)">@s.data.name</a> }
                        }
                        le @date(proposal.meta.created.toLocalDate)
                    </p>
                </div>
            </div>
        }
    </div>
}