@import com.humantalks.meetups.Meetup
@import com.humantalks.venues.Venue
@import com.humantalks.persons.Person
@import com.humantalks.talks.Talk
@import com.humantalks.common.views.html.partials._
@import com.humantalks.meetups.routes
@import global.views.html.format._
@(meetup: Meetup, talkMap: Map[Talk.Id, Talk], personMap: Map[Person.Id, Person], venueMap: Map[Venue.Id, Venue])
@main("Home") {
    @header("meetup")

    <div class="container">
        <h1>
            <a href="@routes.MeetupCtrl.update(meetup.id)" class="pull-right"><i class="glyphicon glyphicon-pencil"></i></a>
            @meetup.data.title
        </h1>
        <p>
            @if(meetup.published){ <span class="label label-success">Publié</span> } else { <span class="label label-danger">Brouillon</span> }
            le @date(meetup.data.date.toLocalDate)
            @meetup.data.venue.flatMap(id => venueMap.get(id)).map{v => à @v.data.name}
        </p>
        <p>@meetup.data.description</p>
        @meetup.data.talks.map(id => talkMap.get(id)).flatten.map { talk =>
            <div>Talk: @talk.data.title par @talk.data.speakers.map(s => personMap.get(s)).flatten.map(_.data.name).mkString(", ")</div>
        }
        @meetup.data.roti.map{r => <p><img src="@r"></p>}
        <a href="@routes.MeetupCtrl.publish(meetup.id)" class="btn btn-default btn-lg">Publier</a>
    </div>
}